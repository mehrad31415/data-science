colnames(df_nyt) <- dummy[,1]
df_nyt <- df_nyt %>% rownames_to_column(var = "year")
View (nyt)
View (df_nyt)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
df_nyt <- df_nyt %>% rownames_to_column(var = "year")
colnames(df_nyt) <- df_nyt[,1]
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
df_nyt <- df_nyt %>% rownames_to_column(var = "year")
colnames(df_nyt) <- df_nyt[1,]
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count)
View (nyt)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count) %>% select (-ID)
View (nyt)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count) %>% select (-ID)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
?replace
nyt %>% rowwise() %>% mutate (m = sum)
nyt %>% rowwise() %>% mutate (m = sum())
View (nyt %>% rowwise() %>% mutate (m = sum()))
View (nyt %>% rowwise() %>% mutate (m = sum(c_across(`heart disease`:`drug overdose`))))
View (nyt %>% rowwise() %>% mutate (m = sum(c_across(`heart disease`:`drug overdose`))))
row (nyt)
nrow(nyt)
:for
:?for
:? for
? for
?
? mutate
?? for
?mutate_all
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
View (nyt)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = count)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
View (d00)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:lynching))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") |
contains("man") | contains("terr") | contains("murder") | contains("assass") |
contains("shoot") | contains("knif") | contains("gun") | contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
View (nyt)
View (cdc)
View (google)
final <- rbind(google,nyt,cdc)
View (final)
final2 <- final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year))
ggplot (final2, mapping=aes(x=year,y=count, color= cause)) + geom_line() + facet_grid(vars(label), vars(cause))
View (final2)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
View (google)
ncols (google)
ncol (google)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
View (cdc)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
View(nyt)
View (final)
df %>% mutate (m = homicide + terrorism)
df_cdc %>% mutate (m = homicide + terrorism)
View (df_cdc %>% mutate (m = homicide + terrorism))
View (df_cdc %>% mutate (m = cancer + terrorism))
View (df_cdc %>% mutate (m = as.numerci(cancer) + as.numerci(terrorism)))
View (df_cdc %>% mutate (m = as.numeric(cancer) + as.numeric(terrorism)))
View (df_cdc %>% mutate (m = cancer + homicide))
View (df_cdc %>% mutate (m = sum(c_across(overdose:cancer) + homicide))
)
0.3979481+
0.01297361
View (df_cdc %>% mutate (m = sum(c_across(overdose:cancer)) + homicide)
)
0.016472959+0.4109217
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
library (tidyverse)
library (ggrepel)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
cdc <- df_cdc %>%
select (- (starts_with("homicide_") | starts_with("cancer_") | starts_with("terror"))) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
google <- google %>%
rename(year=Words, alzheimer = `alzheimer's`, accident = `car accidents`, heart = `heart disease`, kidney = `kidney disease`,
respiratory = `respiratory disease`) %>%
filter (year != "Average") %>%
mutate (label = "google")
google <- as_tibble(google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:assassination)) + sum(c_across(shootings:lynching))) %>%
mutate (terrorism= sum(c_across(terrorism:terror attack))) %>%
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:assassination)) + sum(c_across(shootings:lynching))) %>%
mutate (terrorism= sum(c_across(terrorism:`terror attack`))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") |
contains("man") | contains("terrorist") | contains("terror ") | contains("murder") |
contains("assass") | contains("shoot") | contains("knif") | contains("gun") |
contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
View (nyt)
View (cdc)
View (google)
final <- rbind(google,nyt,cdc)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
cdc <- df_cdc %>%
select (- (starts_with("homicide_") | starts_with("cancer_"))) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
final <- rbind(google,nyt,cdc)
View (final)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
library (tidyverse)
library (ggrepel)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
homicide <-df_cdc$homicide+df_cdc$terrorism
cdc <- df_cdc %>%
select (- (starts_with("homicide") | starts_with("cancer_") | starts_with("terror"))) %>%
cbind(homicide) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
homicide <-google$homicide[-length(google$homicide)]+google$terrorism[-length(google$terrorism)]
google <- google %>%
select (-(starts_with("terror") | starts_with("homicide"))) %>%
rename(year=Words, alzheimer = `alzheimer's`, accident = `car accidents`, heart = `heart disease`, kidney = `kidney disease`,
respiratory = `respiratory disease`) %>%
filter (year != "Average") %>%
cbind (homicide) %>%
mutate (label = "google")
google <- as_tibble(google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:lynching))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") |
contains("man") | contains("terr") | contains("murder") | contains("assass") |
contains("shoot") | contains("knif") | contains("gun") | contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
View (nyt)
View (cdc)
View (google)
final <- rbind(google,nyt,cdc)
View (final)
final <- rbind(google,nyt,cdc)
View (final)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
View (cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
View (google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
View (nyt)
library (tidyverse)
library (ggrepel)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
cdc <- df_cdc %>%
select (- (starts_with("homicide_") | starts_with("cancer_") )) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
google <- google %>%
rename(year=Words, alzheimer = `alzheimer's`, accident = `car accidents`, heart = `heart disease`, kidney = `kidney disease`,
respiratory = `respiratory disease`) %>%
filter (year != "Average") %>%
mutate (label = "google")
google <- as_tibble(google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:assassination)) + sum(c_across(shootings:lynching))) %>%
mutate (terrorism= sum(c_across(terrorism:`terror attack`))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") | contains("man") |
contains("terrorist") | contains("terror attack") | contains("murder") | contains("assass") |
contains("shoot") | contains("knif") | contains("gun") | contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
View (nyt)
View (cdc)
View (google)
final <- rbind(google,nyt,cdc)
View (final)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
# this script just contains the codes. For details and descriptions please see the html which contains the codes and descriptions all together.
library (tidyverse)
library (ggrepel)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
cdc <- df_cdc %>%
select (- (starts_with("homicide_") | starts_with("cancer_") )) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
google <- google %>%
rename(year=Words, alzheimer = `alzheimer's`, accident = `car accidents`, heart = `heart disease`, kidney = `kidney disease`,
respiratory = `respiratory disease`) %>%
filter (year != "Average") %>%
mutate (label = "google")
google <- as_tibble(google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:assassination)) + sum(c_across(shootings:lynching))) %>%
mutate (terrorism= sum(c_across(terrorism:`terror attack`))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") | contains("man") |
contains("terrorist") | contains("terror attack") | contains("murder") | contains("assass") |
contains("shoot") | contains("knif") | contains("gun") | contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
final <- rbind(google,nyt,cdc)
(nyt)
View (cdc)
View (google)
View (final)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
library (tidyverse)
library (ggrepel)
cdc <- read_delim("Data/CDC.txt", delim = "\t", show_col_types = FALSE)
dummy <- as.data.frame(cdc)
df_cdc  <- data.frame(t(dummy [,-1]))
colnames(df_cdc) <- dummy[,1]
df_cdc <- df_cdc %>% rownames_to_column(var = "year")
df_cdc <- df_cdc %>%
rowwise(year) %>%
mutate (cancer = sum(c_across(cancer_all:cancer_breast))) %>%
rename (respiratory= loresp, pneumonia = influpneu) %>%
mutate (homicide = sum(c_across(homicide_all:homicide_legmil)))
cdc <- df_cdc %>%
select (- (starts_with("homicide_") | starts_with("cancer_") )) %>%
mutate (label = "cdc")
cdc <- as_tibble(cdc)
google <- read_csv("Data/Google-trends.csv", show_col_types = FALSE)
google <- google %>%
rename(year=Words, alzheimer = `alzheimer's`, accident = `car accidents`, heart = `heart disease`, kidney = `kidney disease`,
respiratory = `respiratory disease`) %>%
filter (year != "Average") %>%
mutate (label = "google")
google <- as_tibble(google)
nyt <-
list.files(path = "Data/NYT", full.names = TRUE) %>%
map_df(read_csv, show_col_types = FALSE)
nyt <- nyt %>% group_by(year) %>% mutate (percentage = count/ sum (count)) %>% select (Words, year, percentage)
nyt <- nyt %>% pivot_wider(names_from = year, values_from = percentage)
dummy <- as.data.frame(nyt)
df_nyt  <- data.frame(t(dummy [,-1]))
colnames(df_nyt) <- dummy[,1]
nyt <- df_nyt %>% rownames_to_column(var = "year")
nyt <- nyt %>% rowwise(year) %>%
mutate (heart = sum(c_across(`heart disease`:`cardiovascular disease`))) %>%
mutate (cancer = sum(c_across(`cancer`:`malignant neoplasms`))) %>%
mutate (respiratory = sum(c_across(`respiratory disease`:`asthma`))) %>%
mutate (accident = sum(c_across(`unintentional injuries`:`car crash`))) %>%
mutate (alzheimer = sum(c_across(`stroke`:`alzheimer's disease`))) %>%
mutate (pneumonia= sum(c_across(Influenza:flu))) %>%
mutate (kidney= sum(c_across(`kidney disease`:`nephrotic syndrome`))) %>%
mutate (suicide= sum(c_across(`suicide`:`self-harm`))) %>%
mutate (homicide= sum(c_across(homicide:assassination)) + sum(c_across(shootings:lynching))) %>%
mutate (terrorism= sum(c_across(terrorism:`terror attack`))) %>%
rename (overdose= `drug overdose`)
nyt <- nyt%>%
select (- (contains("disease") | ends_with("failure") | starts_with("malignant") | contains("bronchitis") |
contains("emphysema") | contains("asthma") | contains("unintentional") | contains("car ") |
contains("pileup") | contains("flu") | contains("neph") | contains("self") | contains("man") |
contains("terrorist") | contains("terror attack") | contains("murder") | contains("assass") |
contains("shoot") | contains("knif") | contains("gun") | contains("lynch") | contains("drug"))) %>%
mutate (label = "NYT")
View (nyt)
View (cdc)
View (google)
final <- rbind(google,nyt,cdc)
View (final)
final %>%
pivot_longer(!label & !year, names_to = "cause", values_to = "count") %>%
mutate (year=as.numeric(year)) %>%
ggplot (mapping=aes(x=year,y=count, color= cause)) +
geom_line() +
facet_grid(vars(label), vars(cause))
